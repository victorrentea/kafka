@startuml
title Atomic SQL + Produce
hide footbox
skinparam monochrome reverse
database " " as DB order 9
participant B order 10

group transaction
    P->DB: update
    P->DB: insert M into OUTBOX {ik:new uuid, json}
end

'Poller->DB: M{ik} = select from OUTBOX
'Poller->B: M{ik}
'Poller->DB!!: delete M from OUTBOX
'Poller->DB: M{ik} = select from OUTBOX
'Poller->B: M{ik}


group CDC/Debezium
    DB->B: M
end
@enduml

