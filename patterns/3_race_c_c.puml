@startuml
title Consumer Race
hide footbox
skinparam monochrome reverse
database DB order 9

B->C: M {key:7,A}
hnote over DB: R
C<-DB: R = SELECT id=7
C->DB: UPDATE R + A
B->C: M {key:7,B}
C->DB: R+A = SELECT id=7
C->DB: UPDATE R +A+ B
hnote over DB: R + A+B
@enduml
